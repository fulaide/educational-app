{"version":3,"sources":["../src/components/ImagePicker.svelte","../src/utils/preset-images.ts","../src/utils/vercel-blob.ts","../src/components/PresetGallery.svelte","../src/components/CustomUpload.svelte","../src/stores/media.svelte.js","../src/types.ts"],"sourcesContent":["import 'ImagePicker.svelte.css';import 'svelte/internal/disclose-version';\nimport * as $ from 'svelte/internal/client';\nimport { getPresetImages } from \"../utils/preset-images.js\";\nimport { validateImageFile } from \"../utils/vercel-blob.js\";\nimport PresetGallery from \"./PresetGallery.svelte\";\nimport CustomUpload from \"./CustomUpload.svelte\";\nimport { t } from \"@educational-app/i18n\";\n\nvar on_click = (_, switchTab) => switchTab('presets');\nvar on_click_1 = (__1, switchTab) => switchTab('upload');\nvar root_1 = $.from_html(`<button type=\"button\"> </button>`);\nvar root_5 = $.from_html(`<div class=\"selected-preview svelte-ikvep\"><h4 class=\"svelte-ikvep\"> </h4> <div class=\"preview-image svelte-ikvep\"><img class=\"preview-img svelte-ikvep\"/></div></div>`);\nvar root = $.from_html(`<div class=\"image-picker svelte-ikvep\"><div class=\"tab-navigation svelte-ikvep\"><button type=\"button\"> </button> <!></div> <div class=\"tab-content svelte-ikvep\"><!></div> <!></div>`);\n\nexport default function ImagePicker($$anchor, $$props) {\n\t$.push($$props, true);\n\n\tconst [$$stores, $$cleanup] = $.setup_stores();\n\tconst $t = () => $.store_get(t, '$t', $$stores);\n\n\tlet allowUpload = $.prop($$props, 'allowUpload', 3, true),\n\t\tmaxFileSize = $.prop($$props, 'maxFileSize', 3, 5 * 1024 * 1024),\n\t\t// 5MB default\n\t\tacceptedFormats = $.prop($$props, 'acceptedFormats', 19, () => [\"image/jpeg\", \"image/png\", \"image/webp\"]),\n\t\tmultiple = $.prop($$props, 'multiple', 3, false);\n\n\tlet selectedImages = $.state($.proxy([]));\n\tlet isUploading = $.state(false);\n\tlet uploadProgress = $.state(0);\n\tlet uploadError = $.state(null);\n\tlet activeTab = $.state(\"presets\");\n\tconst presetImages = getPresetImages($$props.category);\n\n\tfunction presetToImageAsset(preset) {\n\t\treturn {\n\t\t\tid: preset.id,\n\t\t\turl: preset.url,\n\t\t\ttype: \"preset\",\n\t\t\tcategory: preset.category,\n\t\t\talt: preset.alt,\n\t\t\tmetadata: { tags: preset.tags, thumbnail: preset.thumbnail },\n\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t};\n\t}\n\n\tfunction handlePresetSelect(preset) {\n\t\tconst imageAsset = presetToImageAsset(preset);\n\n\t\t$.set(selectedImages, [imageAsset], true);\n\t\t$$props.onSelect?.([imageAsset]);\n\t}\n\n\tasync function handleCustomUpload(files) {\n\t\tif (!files || files.length === 0) return;\n\n\t\tconst file = files[0];\n\t\tconst validationError = validateImageFile(file, maxFileSize());\n\n\t\tif (validationError) {\n\t\t\t$.set(isUploading, false);\n\t\t\t$.set(uploadProgress, 0);\n\t\t\t$.set(uploadError, validationError, true);\n\t\t\t$$props.onError?.(validationError);\n\n\t\t\treturn;\n\t\t}\n\n\t\t$.set(isUploading, true);\n\t\t$.set(uploadProgress, 0);\n\t\t$.set(uploadError, null);\n\n\t\ttry {\n\t\t\tconst formData = new FormData();\n\n\t\t\tformData.append(\"file\", file);\n\t\t\tformData.append(\"folder\", $$props.category);\n\n\t\t\tconst response = await fetch(\"/api/media/upload\", { method: \"POST\", body: formData, credentials: \"include\"\n\n\t\t\t// Include session cookies for authentication\n\t\t\t });\n\n\t\t\tif (!response.ok) {\n\t\t\t\tif (response.status === 303 || response.status === 302) {\n\t\t\t\t\tthrow new Error($t()(\"media.image_picker.authentication_required\"));\n\t\t\t\t}\n\n\t\t\t\tconst errorData = await response.json().catch(() => ({ message: $t()(\"media.image_picker.upload_error\") }));\n\n\t\t\t\tthrow new Error(errorData.message || $t()(\"media.image_picker.upload_error\"));\n\t\t\t}\n\n\t\t\tconst result = await response.json();\n\n\t\t\tconst imageAsset = {\n\t\t\t\tid: crypto.randomUUID(),\n\t\t\t\turl: result.url,\n\t\t\t\ttype: \"custom\",\n\t\t\t\tcategory: $$props.category,\n\t\t\t\tcreatedAt: /* @__PURE__ */ new Date(),\n\t\t\t\tupdatedAt: /* @__PURE__ */ new Date()\n\t\t\t};\n\n\t\t\t$.set(selectedImages, [imageAsset], true);\n\t\t\t$.set(isUploading, false);\n\t\t\t$.set(uploadProgress, 100);\n\t\t\t$.set(uploadError, null);\n\t\t\t$$props.onSelect?.($.get(selectedImages));\n\t\t} catch(error) {\n\t\t\tconst errorMessage = error instanceof Error\n\t\t\t\t? error.message\n\t\t\t\t: $t()(\"media.image_picker.upload_error\");\n\n\t\t\t$.set(isUploading, false);\n\t\t\t$.set(uploadProgress, 0);\n\t\t\t$.set(uploadError, errorMessage, true);\n\t\t\t$$props.onError?.(errorMessage);\n\t\t}\n\t}\n\n\tfunction switchTab(tab) {\n\t\t$.set(activeTab, tab, true);\n\t\t$.set(uploadError, null);\n\t}\n\n\tvar div = root();\n\tvar div_1 = $.child(div);\n\tvar button = $.child(div_1);\n\n\tbutton.__click = [on_click, switchTab];\n\n\tvar text = $.child(button, true);\n\n\t$.reset(button);\n\n\tvar node = $.sibling(button, 2);\n\n\t{\n\t\tvar consequent = ($$anchor) => {\n\t\t\tvar button_1 = root_1();\n\n\t\t\tbutton_1.__click = [on_click_1, switchTab];\n\n\t\t\tvar text_1 = $.child(button_1, true);\n\n\t\t\t$.reset(button_1);\n\n\t\t\t$.template_effect(\n\t\t\t\t($0) => {\n\t\t\t\t\t$.set_class(button_1, 1, `tab-button ${$.get(activeTab) === 'upload' ? 'active' : ''}`, 'svelte-ikvep');\n\t\t\t\t\t$.set_text(text_1, $0);\n\t\t\t\t},\n\t\t\t\t[() => $t()('media.image_picker.tab_upload')]\n\t\t\t);\n\n\t\t\t$.append($$anchor, button_1);\n\t\t};\n\n\t\t$.if(node, ($$render) => {\n\t\t\tif (allowUpload()) $$render(consequent);\n\t\t});\n\t}\n\n\t$.reset(div_1);\n\n\tvar div_2 = $.sibling(div_1, 2);\n\tvar node_1 = $.child(div_2);\n\n\t{\n\t\tvar consequent_1 = ($$anchor) => {\n\t\t\tPresetGallery($$anchor, {\n\t\t\t\tget category() {\n\t\t\t\t\treturn $$props.category;\n\t\t\t\t},\n\n\t\t\t\tget currentImage() {\n\t\t\t\t\treturn $$props.currentImage;\n\t\t\t\t},\n\n\t\t\t\tonSelect: handlePresetSelect\n\t\t\t});\n\t\t};\n\n\t\tvar alternate = ($$anchor) => {\n\t\t\tvar fragment_1 = $.comment();\n\t\t\tvar node_2 = $.first_child(fragment_1);\n\n\t\t\t{\n\t\t\t\tvar consequent_2 = ($$anchor) => {\n\t\t\t\t\tCustomUpload($$anchor, {\n\t\t\t\t\t\tget maxFileSize() {\n\t\t\t\t\t\t\treturn maxFileSize();\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tget acceptedFormats() {\n\t\t\t\t\t\t\treturn acceptedFormats();\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tget isUploading() {\n\t\t\t\t\t\t\treturn $.get(isUploading);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tget uploadProgress() {\n\t\t\t\t\t\t\treturn $.get(uploadProgress);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tget uploadError() {\n\t\t\t\t\t\t\treturn $.get(uploadError);\n\t\t\t\t\t\t},\n\n\t\t\t\t\t\tonFileSelect: handleCustomUpload\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\t$.if(\n\t\t\t\t\tnode_2,\n\t\t\t\t\t($$render) => {\n\t\t\t\t\t\tif ($.get(activeTab) === 'upload' && allowUpload()) $$render(consequent_2);\n\t\t\t\t\t},\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t$.append($$anchor, fragment_1);\n\t\t};\n\n\t\t$.if(node_1, ($$render) => {\n\t\t\tif ($.get(activeTab) === 'presets') $$render(consequent_1); else $$render(alternate, false);\n\t\t});\n\t}\n\n\t$.reset(div_2);\n\n\tvar node_3 = $.sibling(div_2, 2);\n\n\t{\n\t\tvar consequent_3 = ($$anchor) => {\n\t\t\tvar div_3 = root_5();\n\t\t\tvar h4 = $.child(div_3);\n\t\t\tvar text_2 = $.child(h4, true);\n\n\t\t\t$.reset(h4);\n\n\t\t\tvar div_4 = $.sibling(h4, 2);\n\t\t\tvar img = $.child(div_4);\n\n\t\t\t$.reset(div_4);\n\t\t\t$.reset(div_3);\n\n\t\t\t$.template_effect(\n\t\t\t\t($0) => {\n\t\t\t\t\t$.set_text(text_2, $0);\n\t\t\t\t\t$.set_attribute(img, 'src', $.get(selectedImages)[0].url);\n\t\t\t\t\t$.set_attribute(img, 'alt', $.get(selectedImages)[0].alt || 'Selected image');\n\t\t\t\t},\n\t\t\t\t[() => $t()('media.image_picker.selected_image')]\n\t\t\t);\n\n\t\t\t$.append($$anchor, div_3);\n\t\t};\n\n\t\t$.if(node_3, ($$render) => {\n\t\t\tif ($.get(selectedImages).length > 0) $$render(consequent_3);\n\t\t});\n\t}\n\n\t$.reset(div);\n\n\t$.template_effect(\n\t\t($0) => {\n\t\t\t$.set_class(button, 1, `tab-button ${$.get(activeTab) === 'presets' ? 'active' : ''}`, 'svelte-ikvep');\n\t\t\t$.set_text(text, $0);\n\t\t},\n\t\t[() => $t()('media.image_picker.tab_gallery')]\n\t);\n\n\t$.append($$anchor, div);\n\t$.pop();\n\t$$cleanup();\n}\n\n$.delegate(['click']);","import type { PresetImage, ImageCategory } from '../types.js';\n\n/**\n * Preset image catalog management\n */\n\nexport const CLASS_AVATAR_PRESETS: PresetImage[] = [\n  // Animals\n  {\n    id: 'owl-classroom',\n    url: '/assets/class-avatars/owl-classroom.svg',\n    category: 'class-avatars',\n    alt: 'Wise owl with graduation cap',\n    tags: ['animal', 'wise', 'education', 'popular']\n  },\n  {\n    id: 'bear-reading',\n    url: '/assets/class-avatars/bear-reading.svg',\n    category: 'class-avatars',\n    alt: 'Friendly bear reading a book',\n    tags: ['animal', 'reading', 'friendly', 'popular']\n  },\n  \n  // School Objects\n  {\n    id: 'colorful-pencils',\n    url: '/assets/class-avatars/colorful-pencils.svg',\n    category: 'class-avatars',\n    alt: 'Bundle of colorful pencils',\n    tags: ['school', 'creative', 'colorful', 'writing', 'popular']\n  },\n  {\n    id: 'open-book',\n    url: '/assets/class-avatars/open-book.svg',\n    category: 'class-avatars',\n    alt: 'Open book with golden pages',\n    tags: ['school', 'reading', 'knowledge', 'popular']\n  },\n\n  // Abstract & Geometric\n  {\n    id: 'rainbow-circle',\n    url: '/assets/class-avatars/rainbow-circle.svg',\n    category: 'class-avatars',\n    alt: 'Colorful rainbow circle',\n    tags: ['abstract', 'colorful', 'rainbow', 'positive', 'popular']\n  },\n  {\n    id: 'star-burst',\n    url: '/assets/class-avatars/star-burst.svg',\n    category: 'class-avatars',\n    alt: 'Golden star with burst effect',\n    tags: ['abstract', 'achievement', 'success', 'motivational']\n  }\n];\n\nexport const REWARD_IMAGE_PRESETS: PresetImage[] = [\n  // Achievement badges\n  {\n    id: 'gold-star',\n    url: '/assets/reward-images/gold-star.webp',\n    category: 'reward-images',\n    alt: 'Shiny gold star',\n    tags: ['achievement', 'star', 'gold', 'popular']\n  },\n  {\n    id: 'trophy-winner',\n    url: '/assets/reward-images/trophy-winner.webp',\n    category: 'reward-images',\n    alt: 'Winner trophy cup',\n    tags: ['achievement', 'trophy', 'winner', 'success']\n  },\n  {\n    id: 'medal-honor',\n    url: '/assets/reward-images/medal-honor.webp',\n    category: 'reward-images',\n    alt: 'Honor medal with ribbon',\n    tags: ['achievement', 'medal', 'honor', 'recognition']\n  },\n\n  // Fun rewards\n  {\n    id: 'ice-cream-treat',\n    url: '/assets/reward-images/ice-cream-treat.webp',\n    category: 'reward-images',\n    alt: 'Colorful ice cream cone',\n    tags: ['treat', 'fun', 'sweet', 'popular']\n  },\n  {\n    id: 'playground-fun',\n    url: '/assets/reward-images/playground-fun.webp',\n    category: 'reward-images',\n    alt: 'Fun playground equipment',\n    tags: ['fun', 'play', 'active', 'outdoor']\n  }\n];\n\n/**\n * Get preset images by category\n */\nexport function getPresetImages(category: ImageCategory): PresetImage[] {\n  switch (category) {\n    case 'class-avatars':\n      return CLASS_AVATAR_PRESETS;\n    case 'reward-images':\n      return REWARD_IMAGE_PRESETS;\n    case 'student-profiles':\n    case 'achievements':\n      return []; // To be implemented later\n    default:\n      return [];\n  }\n}\n\n/**\n * Get preset images by tags\n */\nexport function getPresetImagesByTags(\n  category: ImageCategory, \n  tags: string[]\n): PresetImage[] {\n  const presets = getPresetImages(category);\n  if (tags.length === 0) return presets;\n  \n  return presets.filter(preset =>\n    tags.some(tag => preset.tags.includes(tag))\n  );\n}\n\n/**\n * Get popular preset images\n */\nexport function getPopularPresetImages(category: ImageCategory): PresetImage[] {\n  return getPresetImagesByTags(category, ['popular']);\n}\n\n/**\n * Search preset images by name or alt text\n */\nexport function searchPresetImages(\n  category: ImageCategory,\n  query: string\n): PresetImage[] {\n  const presets = getPresetImages(category);\n  const lowerQuery = query.toLowerCase();\n  \n  return presets.filter(preset =>\n    preset.alt.toLowerCase().includes(lowerQuery) ||\n    preset.tags.some(tag => tag.toLowerCase().includes(lowerQuery))\n  );\n}","import { put, del, list } from '@vercel/blob';\nimport type { ImageCategory, UploadResult } from '../types.js';\n\n/**\n * Vercel Blob storage client for image uploads\n */\n\nexport interface BlobUploadOptions {\n  folder: ImageCategory;\n  filename?: string;\n  maxSize?: number;\n}\n\n/**\n * Upload file to Vercel Blob storage\n */\nexport async function uploadToBlob(\n  file: File, \n  options: BlobUploadOptions\n): Promise<UploadResult> {\n  const { folder, filename, maxSize = 5 * 1024 * 1024 } = options;\n  \n  // Validate file size\n  if (file.size > maxSize) {\n    throw new Error(`File size exceeds maximum allowed size of ${maxSize / (1024 * 1024)}MB`);\n  }\n\n  // Validate file type\n  const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];\n  if (!allowedTypes.includes(file.type)) {\n    throw new Error('Invalid file type. Only JPEG, PNG, and WebP files are allowed.');\n  }\n\n  // Generate unique filename\n  const timestamp = Date.now();\n  const extension = file.name.split('.').pop() || 'jpg';\n  const finalFilename = filename \n    ? `${filename}.${extension}`\n    : `${timestamp}-${file.name.replace(/[^a-zA-Z0-9.-]/g, '_')}`;\n\n  const blobPath = `${folder}/${finalFilename}`;\n\n  try {\n    const { url } = await put(blobPath, file, {\n      access: 'public',\n      handleUploadUrl: '/api/media/upload'\n    });\n\n    return {\n      url,\n      type: 'custom',\n      size: file.size,\n      filename: finalFilename\n    };\n  } catch (error) {\n    console.error('Failed to upload to Vercel Blob:', error);\n    throw new Error('Upload failed. Please try again.');\n  }\n}\n\n/**\n * Delete file from Vercel Blob storage\n */\nexport async function deleteFromBlob(url: string): Promise<void> {\n  try {\n    await del(url);\n  } catch (error) {\n    console.error('Failed to delete from Vercel Blob:', error);\n    throw new Error('Delete failed. Please try again.');\n  }\n}\n\n/**\n * List files in a specific folder\n */\nexport async function listBlobFiles(folder: ImageCategory) {\n  try {\n    const { blobs } = await list({\n      prefix: `${folder}/`,\n      limit: 100\n    });\n    return blobs;\n  } catch (error) {\n    console.error('Failed to list Blob files:', error);\n    throw new Error('Failed to list files.');\n  }\n}\n\n/**\n * Validate image file before upload\n */\nexport function validateImageFile(file: File, maxSize = 5 * 1024 * 1024): string | null {\n  // Check file size\n  if (file.size > maxSize) {\n    return `File size must be less than ${maxSize / (1024 * 1024)}MB`;\n  }\n\n  // Check file type\n  const allowedTypes = ['image/jpeg', 'image/png', 'image/webp'];\n  if (!allowedTypes.includes(file.type)) {\n    return 'Only JPEG, PNG, and WebP files are allowed';\n  }\n\n  // Check file dimensions (will be processed client-side)\n  return null;\n}\n\n/**\n * Generate thumbnail URL from main image URL\n * This is a placeholder - actual implementation would depend on your CDN setup\n */\nexport function generateThumbnailUrl(url: string, size = 256): string {\n  // For now, return the original URL\n  // In production, you might use a service like Cloudinary or implement\n  // server-side image processing\n  return url;\n}","import 'PresetGallery.svelte.css';import 'svelte/internal/disclose-version';\nimport * as $ from 'svelte/internal/client';\nimport { getPresetImages, getPresetImagesByTags } from \"../utils/preset-images.js\";\nimport { t } from \"@educational-app/i18n\";\n\nfunction clearFilters(_, searchQuery, selectedTags) {\n\t$.set(searchQuery, \"\");\n\t$.set(selectedTags, [], true);\n}\n\nvar on_click = (__1, toggleTag, tag) => toggleTag($.get(tag));\nvar root_2 = $.from_html(`<button type=\"button\"> </button>`);\nvar root_3 = $.from_html(`<button type=\"button\" class=\"clear-filters svelte-1l4d1g0\"> </button>`);\nvar root_1 = $.from_html(`<div class=\"tag-filters svelte-1l4d1g0\"><span class=\"filter-label svelte-1l4d1g0\"> </span> <!> <!></div>`);\nvar on_click_1 = (__2, selectPreset, preset) => selectPreset($.get(preset));\nvar root_5 = $.from_html(`<span class=\"preset-tag svelte-1l4d1g0\"> </span>`);\nvar root_4 = $.from_html(`<button type=\"button\"><img class=\"preset-image svelte-1l4d1g0\" loading=\"lazy\"/> <div class=\"preset-overlay svelte-1l4d1g0\"><div class=\"preset-tags svelte-1l4d1g0\"></div></div></button>`);\nvar root_6 = $.from_html(`<div class=\"no-results svelte-1l4d1g0\"><svg class=\"no-results-icon svelte-1l4d1g0\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"></path></svg> <p class=\"svelte-1l4d1g0\"> </p> <button type=\"button\" class=\"clear-filters-btn svelte-1l4d1g0\"> </button></div>`);\nvar root = $.from_html(`<div class=\"preset-gallery svelte-1l4d1g0\"><div class=\"controls svelte-1l4d1g0\"><div class=\"search-box svelte-1l4d1g0\"><input type=\"text\" class=\"search-input svelte-1l4d1g0\"/></div> <!></div> <div class=\"image-grid svelte-1l4d1g0\"></div></div>`);\n\nexport default function PresetGallery($$anchor, $$props) {\n\t$.push($$props, true);\n\n\tconst [$$stores, $$cleanup] = $.setup_stores();\n\tconst $t = () => $.store_get(t, '$t', $$stores);\n\tconst allPresets = getPresetImages($$props.category);\n\tlet searchQuery = $.state(\"\");\n\tlet selectedTags = $.state($.proxy([]));\n\n\tconst availableTags = $.derived(() => () => {\n\t\tconst tagSet = /* @__PURE__ */ new Set();\n\n\t\tallPresets.forEach((preset) => {\n\t\t\tpreset.tags.forEach((tag) => tagSet.add(tag));\n\t\t});\n\n\t\treturn Array.from(tagSet).sort();\n\t});\n\n\tconst filteredPresets = $.derived(() => () => {\n\t\tlet filtered = allPresets;\n\n\t\tif ($.get(searchQuery).trim()) {\n\t\t\tconst query = $.get(searchQuery).toLowerCase();\n\n\t\t\tfiltered = filtered.filter((preset) => preset.alt.toLowerCase().includes(query) || preset.tags.some((tag) => tag.toLowerCase().includes(query)));\n\t\t}\n\n\t\tif ($.get(selectedTags).length > 0) {\n\t\t\tfiltered = filtered.filter((preset) => $.get(selectedTags).every((tag) => preset.tags.includes(tag)));\n\t\t}\n\n\t\treturn filtered;\n\t});\n\n\tfunction selectPreset(preset) {\n\t\t$$props.onSelect?.(preset);\n\t}\n\n\tfunction toggleTag(tag) {\n\t\tif ($.get(selectedTags).includes(tag)) {\n\t\t\t$.set(selectedTags, $.get(selectedTags).filter((t2) => t2 !== tag), true);\n\t\t} else {\n\t\t\t$.set(selectedTags, [...$.get(selectedTags), tag], true);\n\t\t}\n\t}\n\n\tvar div = root();\n\tvar div_1 = $.child(div);\n\tvar div_2 = $.child(div_1);\n\tvar input = $.child(div_2);\n\n\t$.remove_input_defaults(input);\n\t$.reset(div_2);\n\n\tvar node = $.sibling(div_2, 2);\n\n\t{\n\t\tvar consequent_1 = ($$anchor) => {\n\t\t\tvar div_3 = root_1();\n\t\t\tvar span = $.child(div_3);\n\t\t\tvar text = $.child(span);\n\n\t\t\t$.reset(span);\n\n\t\t\tvar node_1 = $.sibling(span, 2);\n\n\t\t\t$.each(node_1, 17, () => $.get(availableTags), $.index, ($$anchor, tag) => {\n\t\t\t\tvar button = root_2();\n\n\t\t\t\tbutton.__click = [on_click, toggleTag, tag];\n\n\t\t\t\tvar text_1 = $.child(button, true);\n\n\t\t\t\t$.reset(button);\n\n\t\t\t\t$.template_effect(\n\t\t\t\t\t($0) => {\n\t\t\t\t\t\t$.set_class(button, 1, `tag-filter ${$0 ?? ''}`, 'svelte-1l4d1g0');\n\t\t\t\t\t\t$.set_text(text_1, $.get(tag));\n\t\t\t\t\t},\n\t\t\t\t\t[\n\t\t\t\t\t\t() => $.get(selectedTags).includes($.get(tag)) ? 'active' : ''\n\t\t\t\t\t]\n\t\t\t\t);\n\n\t\t\t\t$.append($$anchor, button);\n\t\t\t});\n\n\t\t\tvar node_2 = $.sibling(node_1, 2);\n\n\t\t\t{\n\t\t\t\tvar consequent = ($$anchor) => {\n\t\t\t\t\tvar button_1 = root_3();\n\n\t\t\t\t\tbutton_1.__click = [clearFilters, searchQuery, selectedTags];\n\n\t\t\t\t\tvar text_2 = $.child(button_1, true);\n\n\t\t\t\t\t$.reset(button_1);\n\t\t\t\t\t$.template_effect(($0) => $.set_text(text_2, $0), [() => $t()('common.clear')]);\n\t\t\t\t\t$.append($$anchor, button_1);\n\t\t\t\t};\n\n\t\t\t\t$.if(node_2, ($$render) => {\n\t\t\t\t\tif ($.get(selectedTags).length > 0 || $.get(searchQuery).trim()) $$render(consequent);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$.reset(div_3);\n\t\t\t$.template_effect(($0) => $.set_text(text, `${$0 ?? ''}:`), [() => $t()('common.filter_by')]);\n\t\t\t$.append($$anchor, div_3);\n\t\t};\n\n\t\t$.if(node, ($$render) => {\n\t\t\tif ($.get(availableTags).length > 0) $$render(consequent_1);\n\t\t});\n\t}\n\n\t$.reset(div_1);\n\n\tvar div_4 = $.sibling(div_1, 2);\n\n\t$.each(\n\t\tdiv_4,\n\t\t21,\n\t\t() => $.get(filteredPresets),\n\t\t(preset) => preset.id,\n\t\t($$anchor, preset) => {\n\t\t\tvar button_2 = root_4();\n\n\t\t\tbutton_2.__click = [on_click_1, selectPreset, preset];\n\n\t\t\tvar img = $.child(button_2);\n\t\t\tvar div_5 = $.sibling(img, 2);\n\t\t\tvar div_6 = $.child(div_5);\n\n\t\t\t$.each(div_6, 21, () => $.get(preset).tags.slice(0, 3), $.index, ($$anchor, tag) => {\n\t\t\t\tvar span_1 = root_5();\n\t\t\t\tvar text_3 = $.child(span_1, true);\n\n\t\t\t\t$.reset(span_1);\n\t\t\t\t$.template_effect(() => $.set_text(text_3, $.get(tag)));\n\t\t\t\t$.append($$anchor, span_1);\n\t\t\t});\n\n\t\t\t$.reset(div_6);\n\t\t\t$.reset(div_5);\n\t\t\t$.reset(button_2);\n\n\t\t\t$.template_effect(() => {\n\t\t\t\t$.set_class(button_2, 1, `preset-item ${$$props.currentImage === $.get(preset).url ? 'selected' : ''}`, 'svelte-1l4d1g0');\n\t\t\t\t$.set_attribute(button_2, 'title', $.get(preset).alt);\n\t\t\t\t$.set_attribute(img, 'src', $.get(preset).url);\n\t\t\t\t$.set_attribute(img, 'alt', $.get(preset).alt);\n\t\t\t});\n\n\t\t\t$.append($$anchor, button_2);\n\t\t},\n\t\t($$anchor) => {\n\t\t\tvar div_7 = root_6();\n\t\t\tvar p = $.sibling($.child(div_7), 2);\n\t\t\tvar text_4 = $.child(p, true);\n\n\t\t\t$.reset(p);\n\n\t\t\tvar button_3 = $.sibling(p, 2);\n\n\t\t\tbutton_3.__click = [clearFilters, searchQuery, selectedTags];\n\n\t\t\tvar text_5 = $.child(button_3, true);\n\n\t\t\t$.reset(button_3);\n\t\t\t$.reset(div_7);\n\n\t\t\t$.template_effect(\n\t\t\t\t($0, $1) => {\n\t\t\t\t\t$.set_text(text_4, $0);\n\t\t\t\t\t$.set_text(text_5, $1);\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\t() => $t()('media.image_picker.no_images_found'),\n\t\t\t\t\t() => $t()('common.clear_filters')\n\t\t\t\t]\n\t\t\t);\n\n\t\t\t$.append($$anchor, div_7);\n\t\t}\n\t);\n\n\t$.reset(div_4);\n\t$.reset(div);\n\t$.template_effect(($0) => $.set_attribute(input, 'placeholder', $0), [() => $t()('media.image_picker.search_placeholder')]);\n\t$.bind_value(input, () => $.get(searchQuery), ($$value) => $.set(searchQuery, $$value));\n\t$.append($$anchor, div);\n\t$.pop();\n\t$$cleanup();\n}\n\n$.delegate(['click']);","import 'CustomUpload.svelte.css';import 'svelte/internal/disclose-version';\nimport * as $ from 'svelte/internal/client';\nimport { t } from \"@educational-app/i18n\";\n\nvar on_keydown = (e, triggerFileSelect) => e.key === 'Enter' || e.key === ' ' ? triggerFileSelect() : null;\nvar root_1 = $.from_html(`<div class=\"upload-status svelte-2amyv7\"><div class=\"upload-spinner svelte-2amyv7\"><svg class=\"animate-spin svelte-2amyv7\" viewBox=\"0 0 24 24\"><circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\" fill=\"none\"></circle><path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path></svg></div> <div class=\"upload-text svelte-2amyv7\"><p class=\"upload-title svelte-2amyv7\"> </p> <div class=\"progress-bar svelte-2amyv7\"><div class=\"progress-fill svelte-2amyv7\"></div></div> <p class=\"upload-percentage svelte-2amyv7\"> </p></div></div>`);\nvar root_2 = $.from_html(`<div class=\"upload-prompt svelte-2amyv7\"><div class=\"upload-icon svelte-2amyv7\"><svg fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\"></path></svg></div> <div class=\"upload-text svelte-2amyv7\"><p class=\"upload-title svelte-2amyv7\"> </p> <p class=\"upload-subtitle svelte-2amyv7\"> </p></div></div>`);\nvar root_3 = $.from_html(`<div class=\"error-message svelte-2amyv7\"><svg class=\"error-icon svelte-2amyv7\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path></svg> <span> </span></div>`);\nvar root = $.from_html(`<div class=\"custom-upload svelte-2amyv7\"><input type=\"file\" style=\"display: none;\"/> <div role=\"button\" tabindex=\"0\"><!></div> <div class=\"file-requirements svelte-2amyv7\"><h4 class=\"svelte-2amyv7\">File Requirements:</h4> <ul class=\"svelte-2amyv7\"><li class=\"svelte-2amyv7\"> </li> <li class=\"svelte-2amyv7\"> </li> <li class=\"svelte-2amyv7\">Recommended dimensions: 512Ã—512px or larger</li></ul></div> <!></div>`);\n\nexport default function CustomUpload($$anchor, $$props) {\n\t$.push($$props, true);\n\n\tconst [$$stores, $$cleanup] = $.setup_stores();\n\tconst $t = () => $.store_get(t, '$t', $$stores);\n\tlet fileInputRef;\n\tlet dragOver = $.state(false);\n\n\tfunction formatFileSize(bytes) {\n\t\tif (bytes === 0) return \"0 B\";\n\n\t\tconst k = 1024;\n\t\tconst sizes = [\"B\", \"KB\", \"MB\", \"GB\"];\n\t\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\n\n\t\treturn parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + \" \" + sizes[i];\n\t}\n\n\tfunction handleDragOver(e) {\n\t\te.preventDefault();\n\t\t$.set(dragOver, true);\n\t}\n\n\tfunction handleDragLeave(e) {\n\t\te.preventDefault();\n\t\t$.set(dragOver, false);\n\t}\n\n\tfunction handleDrop(e) {\n\t\te.preventDefault();\n\t\t$.set(dragOver, false);\n\n\t\tif ($$props.isUploading) return;\n\n\t\tconst files = e.dataTransfer?.files;\n\n\t\tif (files && files.length > 0) {\n\t\t\t$$props.onFileSelect(files);\n\t\t}\n\t}\n\n\tfunction handleFileChange(e) {\n\t\tconst target = e.target;\n\n\t\tif (target.files && target.files.length > 0) {\n\t\t\t$$props.onFileSelect(target.files);\n\t\t}\n\n\t\ttarget.value = \"\";\n\t}\n\n\tfunction triggerFileSelect() {\n\t\tif (!$$props.isUploading) {\n\t\t\tfileInputRef?.click();\n\t\t}\n\t}\n\n\tvar div = root();\n\tvar input = $.child(div);\n\n\tinput.__change = handleFileChange;\n\t$.bind_this(input, ($$value) => fileInputRef = $$value, () => fileInputRef);\n\n\tvar div_1 = $.sibling(input, 2);\n\n\tdiv_1.__click = triggerFileSelect;\n\tdiv_1.__keydown = [on_keydown, triggerFileSelect];\n\n\tvar node = $.child(div_1);\n\n\t{\n\t\tvar consequent = ($$anchor) => {\n\t\t\tvar div_2 = root_1();\n\t\t\tvar div_3 = $.sibling($.child(div_2), 2);\n\t\t\tvar p = $.child(div_3);\n\t\t\tvar text = $.child(p, true);\n\n\t\t\t$.reset(p);\n\n\t\t\tvar div_4 = $.sibling(p, 2);\n\t\t\tvar div_5 = $.child(div_4);\n\n\t\t\t$.reset(div_4);\n\n\t\t\tvar p_1 = $.sibling(div_4, 2);\n\t\t\tvar text_1 = $.child(p_1);\n\n\t\t\t$.reset(p_1);\n\t\t\t$.reset(div_3);\n\t\t\t$.reset(div_2);\n\n\t\t\t$.template_effect(\n\t\t\t\t($0) => {\n\t\t\t\t\t$.set_text(text, $0);\n\t\t\t\t\t$.set_style(div_5, `width: ${$$props.uploadProgress ?? ''}%`);\n\t\t\t\t\t$.set_text(text_1, `${$$props.uploadProgress ?? ''}%`);\n\t\t\t\t},\n\t\t\t\t[() => $t()('media.image_picker.uploading')]\n\t\t\t);\n\n\t\t\t$.append($$anchor, div_2);\n\t\t};\n\n\t\tvar alternate = ($$anchor) => {\n\t\t\tvar div_6 = root_2();\n\t\t\tvar div_7 = $.sibling($.child(div_6), 2);\n\t\t\tvar p_2 = $.child(div_7);\n\t\t\tvar text_2 = $.child(p_2, true);\n\n\t\t\t$.reset(p_2);\n\n\t\t\tvar p_3 = $.sibling(p_2, 2);\n\t\t\tvar text_3 = $.child(p_3, true);\n\n\t\t\t$.reset(p_3);\n\t\t\t$.reset(div_7);\n\t\t\t$.reset(div_6);\n\n\t\t\t$.template_effect(\n\t\t\t\t($0, $1) => {\n\t\t\t\t\t$.set_text(text_2, $0);\n\t\t\t\t\t$.set_text(text_3, $1);\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\t() => $t()('media.image_picker.drag_drop_hint'),\n\t\t\t\t\t() => $t()('media.image_picker.browse_files')\n\t\t\t\t]\n\t\t\t);\n\n\t\t\t$.append($$anchor, div_6);\n\t\t};\n\n\t\t$.if(node, ($$render) => {\n\t\t\tif ($$props.isUploading) $$render(consequent); else $$render(alternate, false);\n\t\t});\n\t}\n\n\t$.reset(div_1);\n\n\tvar div_8 = $.sibling(div_1, 2);\n\tvar ul = $.sibling($.child(div_8), 2);\n\tvar li = $.child(ul);\n\tvar text_4 = $.child(li);\n\n\t$.reset(li);\n\n\tvar li_1 = $.sibling(li, 2);\n\tvar text_5 = $.child(li_1);\n\n\t$.reset(li_1);\n\t$.next(2);\n\t$.reset(ul);\n\t$.reset(div_8);\n\n\tvar node_1 = $.sibling(div_8, 2);\n\n\t{\n\t\tvar consequent_1 = ($$anchor) => {\n\t\t\tvar div_9 = root_3();\n\t\t\tvar span = $.sibling($.child(div_9), 2);\n\t\t\tvar text_6 = $.child(span, true);\n\n\t\t\t$.reset(span);\n\t\t\t$.reset(div_9);\n\t\t\t$.template_effect(() => $.set_text(text_6, $$props.uploadError));\n\t\t\t$.append($$anchor, div_9);\n\t\t};\n\n\t\t$.if(node_1, ($$render) => {\n\t\t\tif ($$props.uploadError) $$render(consequent_1);\n\t\t});\n\t}\n\n\t$.reset(div);\n\n\t$.template_effect(\n\t\t($0, $1, $2) => {\n\t\t\t$.set_attribute(input, 'accept', $0);\n\t\t\tinput.disabled = $$props.isUploading;\n\t\t\t$.set_class(div_1, 1, `upload-area ${$.get(dragOver) ? 'drag-over' : ''} ${$$props.isUploading ? 'uploading' : ''}`, 'svelte-2amyv7');\n\t\t\t$.set_text(text_4, `Maximum size: ${$1 ?? ''}`);\n\t\t\t$.set_text(text_5, `Supported formats: ${$2 ?? ''}`);\n\t\t},\n\t\t[\n\t\t\t() => $$props.acceptedFormats.join(','),\n\t\t\t() => formatFileSize($$props.maxFileSize),\n\t\t\t() => $$props.acceptedFormats.map((f) => f.split('/')[1].toUpperCase()).join(', ')\n\t\t]\n\t);\n\n\t$.event('dragover', div_1, handleDragOver);\n\t$.event('dragleave', div_1, handleDragLeave);\n\t$.event('drop', div_1, handleDrop);\n\t$.append($$anchor, div);\n\t$.pop();\n\t$$cleanup();\n}\n\n$.delegate(['change', 'click', 'keydown']);","/**\n * Media state management using Svelte 5 runes\n * @typedef {import('../types.js').ImageAsset} ImageAsset\n * @typedef {import('../types.js').PresetImage} PresetImage  \n * @typedef {import('../types.js').ImageCategory} ImageCategory\n * @typedef {import('../types.js').UploadResult} UploadResult\n */\n\nexport class MediaManager {\n  constructor() {\n    // Initialize state with $state runes inside constructor for proper Svelte context\n    this.selectedImages = $state([]);\n    this.isUploading = $state(false);\n    this.uploadProgress = $state(0);\n    this.uploadError = $state(null);\n    this.presetImages = $state(new Map());\n    this.activeTab = $state('presets');\n    this.showCropper = $state(false);\n  }\n  \n  /**\n   * Select an image (preset or uploaded)\n   * @param {ImageAsset} image\n   */\n  selectImage(image) {\n    this.selectedImages = [image];\n  }\n  \n  /**\n   * Select multiple images\n   * @param {ImageAsset[]} images\n   */\n  selectImages(images) {\n    this.selectedImages = [...images];\n  }\n  \n  /**\n   * Clear selected images\n   */\n  clearSelection() {\n    this.selectedImages = [];\n  }\n  \n  /**\n   * Add uploaded image to selection\n   * @param {UploadResult} result\n   * @param {ImageCategory} category\n   */\n  addUploadedImage(result, category) {\n    const imageAsset = {\n      id: crypto.randomUUID(),\n      url: result.url,\n      type: result.type,\n      category,\n      createdAt: new Date(),\n      updatedAt: new Date()\n    };\n    \n    this.selectedImages = [imageAsset];\n  }\n  \n  /**\n   * Set upload state\n   * @param {boolean} uploading\n   * @param {number} progress\n   * @param {string|null} error\n   */\n  setUploadState(uploading, progress = 0, error = null) {\n    this.isUploading = uploading;\n    this.uploadProgress = progress;\n    this.uploadError = error;\n  }\n  \n  /**\n   * Cache preset images for a category\n   * @param {ImageCategory} category\n   * @param {PresetImage[]} images\n   */\n  cachePresetImages(category, images) {\n    this.presetImages.set(category, images);\n  }\n  \n  /**\n   * Get cached preset images\n   * @param {ImageCategory} category\n   * @returns {PresetImage[]}\n   */\n  getCachedPresetImages(category) {\n    return this.presetImages.get(category) || [];\n  }\n  \n  /**\n   * Switch active tab\n   * @param {'presets' | 'upload'} tab\n   */\n  setActiveTab(tab) {\n    this.activeTab = tab;\n  }\n  \n  /**\n   * Show/hide image cropper\n   * @param {boolean} show\n   */\n  toggleCropper(show) {\n    this.showCropper = show;\n  }\n  \n  /**\n   * Reset all state\n   */\n  reset() {\n    this.selectedImages = [];\n    this.isUploading = false;\n    this.uploadProgress = 0;\n    this.uploadError = null;\n    this.activeTab = 'presets';\n    this.showCropper = false;\n  }\n}\n\n/**\n * Create a new MediaManager instance\n * Use this in components that need media management\n */\nexport function createMediaManager() {\n  return new MediaManager();\n}\n\n/**\n * Utility function to convert PresetImage to ImageAsset\n * @param {PresetImage} preset\n * @returns {ImageAsset}\n */\nexport function presetToImageAsset(preset) {\n  return {\n    id: preset.id,\n    url: preset.url,\n    type: 'preset',\n    category: preset.category,\n    alt: preset.alt,\n    metadata: {\n      tags: preset.tags,\n      thumbnail: preset.thumbnail\n    },\n    createdAt: new Date(),\n    updatedAt: new Date()\n  };\n}","import { z } from 'zod';\n\n/**\n * Image upload types and validation schemas\n */\n\nexport type ImageType = 'preset' | 'custom';\n\nexport type ImageCategory = \n  | 'class-avatars' \n  | 'reward-images' \n  | 'student-profiles' \n  | 'achievements';\n\nexport interface ImageAsset {\n  id: string;\n  url: string;\n  type: ImageType;\n  category: ImageCategory;\n  alt?: string;\n  metadata?: Record<string, unknown>;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nexport interface PresetImage {\n  id: string;\n  url: string;\n  category: ImageCategory;\n  alt: string;\n  tags: string[];\n  thumbnail?: string;\n}\n\nexport interface UploadResult {\n  url: string;\n  type: ImageType;\n  size: number;\n  filename: string;\n}\n\nexport interface ImagePickerConfig {\n  category: ImageCategory;\n  allowUpload: boolean;\n  maxFileSize: number; // in bytes\n  acceptedFormats: string[];\n  cropAspectRatio?: number;\n  multiple: boolean;\n}\n\n// Validation schemas\nexport const uploadFileSchema = z.object({\n  file: z.instanceof(File),\n  category: z.enum(['class-avatars', 'reward-images', 'student-profiles', 'achievements']),\n  alt: z.string().optional()\n});\n\nexport const imageAssetSchema = z.object({\n  id: z.string(),\n  url: z.string().url(),\n  type: z.enum(['preset', 'custom']),\n  category: z.enum(['class-avatars', 'reward-images', 'student-profiles', 'achievements']),\n  alt: z.string().optional(),\n  metadata: z.record(z.unknown()).optional(),\n  createdAt: z.date(),\n  updatedAt: z.date()\n});\n\nexport type UploadFileInput = z.infer<typeof uploadFileSchema>;"],"mappings":"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","names":["$","t2","$$anchor","$","t","root_1","root_2","root_3","root","$$anchor","$2","t","on_click","on_click_1","root_1","root_5","root","presetToImageAsset","$$anchor"]}